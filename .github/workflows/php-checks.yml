name: PHP Code Quality Checks\n\non:\n  push:\n    branches: [ main, 'devin/*' ]\n    paths:\n      - 'php-backend/**'\n      - '.github/workflows/php-checks.yml'\n  pull_request:\n    branches: [ main ]\n    paths:\n      - 'php-backend/**'\n      - '.github/workflows/php-checks.yml'\n  workflow_dispatch:\n\npermissions:\n  contents: write\n  pull-requests: write\n  checks: write\n\njobs:\n  quality:\n    runs-on: ubuntu-latest\n    defaults:\n      run:\n        working-directory: php-backend\n\n    steps:\n      - uses: actions/checkout@v3\n      \n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.2'\n          extensions: mbstring, intl, sqlite3\n          \n      - name: Install dependencies\n        run: composer install --prefer-dist --no-progress\n        \n      - name: Run PHPCS Auto-Fix\n        if: github.event_name == 'pull_request'\n        run: vendor/bin/phpcbf --standard=PSR12 --ignore=vendor/*,cache/* ./ || true\n        \n      - name: Run PHPCS Manual Check\n        run: vendor/bin/phpcs --standard=PSR12 --report=full --colors --ignore=vendor/*,cache/* ./\n        \n      - name: Run PHPStan\n        run: vendor/bin/phpstan analyse --no-progress
